<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Impostor Drawing Game</title>
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
    }
    canvas {
        border: 2px solid black;
        margin: 20px auto;
    }
</style>
</head>
<body>
<div id="initialScreen">
    <div id="playerList">
        <!-- Lista de jogadores será exibida aqui -->
    </div>
    <input type="text" id="playerName" placeholder="Enter player name">
    <button onclick="addPlayer()">Add Player</button>
    <button onclick="startGame()">Start Game</button>
</div>

<div id="transitionScreen" style="display: none;">
    <p id="playerTurnMessage"></p>
    <button onclick="confirmTurn()">Confirm</button>
</div>

<div id="gameScreen" style="display: none;">
    <canvas id="drawingCanvas" width="400" height="400"></canvas>
    <p id="currentPlayerName"></p>
    <p id="wordToDraw"></p>
    <button onclick="nextPlayer()">Next</button>
</div>

<div id="eliminationScreen" style="display: none;">
    <canvas id="eliminationCanvas" width="400" height="200"></canvas>
    <p>Escolha um jogador para eliminar:</p>
    <select id="playerSelect">
        <!-- Opções de jogador serão adicionadas aqui -->
    </select>
    <button onclick="eliminatePlayer()">Eliminar</button>
    <button onclick="skipElimination()">Pular</button>
</div>

<script>
    let players = [];
    let currentPlayerIndex = 0;

    function addPlayer() {
        const input = document.getElementById("playerName");
        const playerName = input.value.trim();
        if (playerName !== "") {
            players.push({ name: playerName, impostor: false });
            input.value = "";
            updatePlayerList();
        }
    }

    function updatePlayerList() {
        const playerListDiv = document.getElementById("playerList");
        playerListDiv.innerHTML = "";
        players.forEach(player => {
            const playerNameSpan = document.createElement("span");
            playerNameSpan.textContent = player.name;
            playerListDiv.appendChild(playerNameSpan);
            playerListDiv.appendChild(document.createElement("br")); // Adiciona nova linha
        });
    }

    function startGame() {
        if (players.length < 3) {
            alert("Minimum of 3 players required to start the game.");
            return;
        }
        const impostorIndex = Math.floor(Math.random() * players.length);
        players[impostorIndex].impostor = true;

        // Oculta a tela inicial
        document.getElementById("initialScreen").style.display = "none";

        // Mostra a tela de transição
        document.getElementById("transitionScreen").style.display = "block";
        document.getElementById("playerTurnMessage").textContent = "É a vez do jogador " + players[currentPlayerIndex].name;
    }

    function confirmTurn() {
        // Oculta a tela de transição
        document.getElementById("transitionScreen").style.display = "none";

        // Mostra a tela do jogo
        document.getElementById("gameScreen").style.display = "block";
        
        // Exibe o nome do jogador atual
        document.getElementById("currentPlayerName").textContent = "Jogador: " + players[currentPlayerIndex].name;

        // Simula a geração de uma palavra aleatória (substitua esta lógica pela sua lógica real)
        const words = ["Cachorro", "Gato", "Casa", "Carro", "Bola"];
        const randomIndex = Math.floor(Math.random() * words.length);
        const wordToDraw = words[randomIndex];

        // Exibe a palavra para desenhar
        document.getElementById("wordToDraw").textContent = "Palavra para desenhar: " + wordToDraw;
    }

    function nextPlayer() {
        // Avança para o próximo jogador
        currentPlayerIndex = (currentPlayerIndex + 1) % players.length;

        if (currentPlayerIndex === 0) {
            // Todos os jogadores deram "Next", mostra a tela de eliminação
            document.getElementById("gameScreen").style.display = "none";
            document.getElementById("eliminationScreen").style.display = "block";
            
            // Preenche a lista de jogadores para eliminação
            const playerSelect = document.getElementById("playerSelect");
            playerSelect.innerHTML = "";
            players.forEach((player, index) => {
                const option = document.createElement("option");
                option.value = index;
                option.textContent = player.name;
                playerSelect.appendChild(option);
            });
        } else {
            // Volta para a tela de transição
            document.getElementById("gameScreen").style.display = "none";
            document.getElementById("transitionScreen").style.display = "block";
            document.getElementById("playerTurnMessage").textContent = "É a vez do jogador " + players[currentPlayerIndex].name;
        }
    }

    function eliminatePlayer() {
        const playerSelect = document.getElementById("playerSelect");
        const selectedIndex = playerSelect.value;
        
        // Remove o jogador selecionado da lista
        players.splice(selectedIndex, 1);
        
        // Volta para a tela de transição
        document.getElementById("eliminationScreen").style.display = "none";
        document.getElementById("transitionScreen").style.display = "block";
        document.getElementById("playerTurnMessage").textContent = "Jogador eliminado!";
        
        // Reinicia o índice do jogador atual se necessário
        if (currentPlayerIndex >= players.length) {
            currentPlayerIndex = 0;
        }
    }

    function skipElimination() {
        // Volta para a tela de transição
        document.getElementById("eliminationScreen").style.display = "none";
        document.getElementById("transitionScreen").style.display = "block";
        document.getElementById("playerTurnMessage").textContent = "Escolha um jogador para eliminar ou pular a eliminação!";
    }
</script>
</body>
</html>
